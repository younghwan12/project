<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 글 보기</title>

    <link rel="stylesheet" href="../../asset/css/reset.css">
    <link rel="stylesheet" href="../../asset/css/common.css">
    <link rel="stylesheet" href="../../asset/css/font.css">

    <link rel="stylesheet" href="../../asset/css/header.css">
    <link rel="stylesheet" href="../../asset/css/board/boardLoginBanner.css">
    <link rel="stylesheet" href="../../asset/css/board/boardImageType.css">
    <link rel="stylesheet" href="../../asset/css/board/boardView.css">
    <link rel="stylesheet" href="../../asset/css/board/boardComment.css">
    <link rel="stylesheet" href="../../asset/css/board/boardViewType.css">
    <link rel="stylesheet" href="../../asset/css/footer.css">
</head>

<!-- header -->
<header id="header" class="header__wrap">
    <div class="header__inner container">
        <div class="header__logo">
            <a href="#">winimal</a>
        </div>
        <nav class="header__menu">
            <ul>
                <li><a href="#">A.hopsital</a></li>
                <li><a href="#">disease</a></li>
                <li><a href="#">community</a></li>
                <li><a href="#">pet shop</a></li>
                <li class="login"><a href="#">LOGOUT</a></li>
            </ul>
        </nav>
        <div class="ham_menu">
            <input type="checkbox">
            <div></div>
            <div></div>
            <div></div>
        </div>                
    </div>
</header>
<!-- //header -->

<body>

    <!-- boardLoginBanner -->
    <section id="boardLoginBanner" class="loginBanner">
        <h2 class="blind">dd</h2>
        <div class="lB__inner">
            <figure class="MyprofileL">
                <img src="../../asset/img/profile.png" alt="프로필">
                <figcaption>누군가님 어서오세요!</figcaption>
                <a href="#">LOGOUT</a>
            </figure>            
            <div class="Myprofile">
                <ul>
                    <li>최근 접속 기록 : 00/ 00/ 00</li>
                    <li><a href="#">나의 정보</a></li>
                    <li><a href="#">나의 반려견</a></li>
                    <li>나의 글 : 00개</li>
                    <li>댓글 수 : 00개</li>
                </ul>
            </div>
        </div>
    </section>
    <!-- //boardLoginBanner -->

    <!-- boardImageType -->
    <section id="boardImageType" class="imageType">
        <div class="imageType__inner">
            <h2>COMMUNITY</h2>
            <p>좋은 글에는 좋은 댓글을 달아주세요!</p>
        </div>
    </section>
    <!-- //boardImageType -->

    <!-- boardView -->
    <section id="boardView">
        <div class="view__inner container">
            <div class="view__top">
                <h2>
                    제목 : 가나다라마바사
                </h2>
                <div class="view__top__right">
                    <h3 class="like">
                        <img src="../../asset/img/like.svg" alt="">
                        추천 수 : 20개
                    </h3>
                    <h3>조회 수 : 20개</h3> 
                    <h3 class="date">2020 / 10 / 05</h3> 
                </div>
            </div>
            <div class="view__bot">
                <p>
                    가는 투명하되 현저하게 있는가? 우리의 있을 목숨이 수 그들에게 있는가?
                    싹이 원질이 너의 있음으로써 이것이다. 안고, 청춘 어디 싹이 너의 가치를 가진 피다.
                    눈이 인생의 인생을 이상은 있으며, 하는 것이다. 공자는 열락의 피가 쓸쓸하랴?
                    되는 원대하고, 청춘 같이, 그것을 쓸쓸하랴? 자신과 풀밭에 눈이 그들의 못할 있으며, 소리다.
                    이것은 같은 투명하되 이것이다. 있는 구하기 이 능히 것이다.
                </p>
                <p>
                    가는 투명하되 현저하게 있는가? 우리의 있을 목숨이 수 그들에게 있는가?
                    싹이 원질이 너의 있음으로써 이것이다. 안고, 청춘 어디 싹이 너의 가치를 가진 피다.
                    눈이 인생의 인생을 이상은 있으며, 하는 것이다. 공자는 열락의 피가 쓸쓸하랴?
                    되는 원대하고, 청춘 같이, 그것을 쓸쓸하랴? 자신과 풀밭에 눈이 그들의 못할 있으며, 소리다.
                    이것은 같은 투명하되 이것이다. 있는 구하기 이 능히 것이다.
                </p>
                <p>
                    가는 투명하되 현저하게 있는가? 우리의 있을 목숨이 수 그들에게 있는가?
                    싹이 원질이 너의 있음으로써 이것이다. 안고, 청춘 어디 싹이 너의 가치를 가진 피다.
                    눈이 인생의 인생을 이상은 있으며, 하는 것이다. 공자는 열락의 피가 쓸쓸하랴?
                    되는 원대하고, 청춘 같이, 그것을 쓸쓸하랴? 자신과 풀밭에 눈이 그들의 못할 있으며, 소리다.
                    이것은 같은 투명하되 이것이다. 있는 구하기 이 능히 것이다.
                </p>
            </div>
        </div>
    </section>
    <!-- //boardView -->

    <!-- boardComment -->
    <section id="boardComment" class="container">
        <h2 class="comment__h2">COMMENT</h2>

        <!-- 댓글 -->
        <div id="boardViewComment">
            <div class="comment__top">
                <div class="comment__write">
                    <div class="comment__write__msg">
                        <label for="commentWrite" style="display: none;">댓글 쓰기</label>
                        <input type="text" id="commentWrite" name="commentWrite" placeholder="좋은 댓글 부탁드려요!" required>
                    </div>
                    <div class="comment__write__info">
                        <label for="commentName" class="blind">이름</label>
                        <input type="text" id="commentName" name="commentName" placeholder="이름" required>
                        <label for="commentPass" style="display: none;">비밀번호</label>
                        <input type="text" id="commentPass" id="commentPass" placeholder="비밀번호" required>
                        <button type="submit" id="commentBtn">댓글 쓰기</button>
                    </div>
                </div>
            </div>

            <div class="comment__bottom">
                <div class="comment__delete">
                    <label for="commentDeletePass" style="display: none;">비밀번호</label>
                    <input type="text" id="commentDeletePass" name="commentDeletePass" placeholder="비밀번호" required>
                    <button id="commentDeleteCancel">취소</button>
                    <button id="commentDeleteButton">삭제</button>
                </div>
                <div class="comment__modify">
                    <label for="commentModifyMsg" style="display: none;">수정 내용</label>
                    <input type="text" id="commentModifyMsg" name="commentModifyMsg" placeholder="수정 내용" required>
                    <label for="commentModifyMsg" style="display: none;">비밀번호</label>
                    <input type="text" id="commentModifyPass" name="commentModifyPass" placeholder="비밀번호" required>
                    <button id="commentModifyCancel">취소</button>
                    <button id="commentModifyButton">수정</button>
                </div>
            </div>
        </div>

        <table>
            <tbody>
                <tr>
                    <td class="com__td">
                        <div class="com__top">
                            누군가님
                            <em>2020 / 10 / 05</em>
                            <div class="com__like">
                                <img src="../../asset/img/like.svg" alt="">
                                <p>5</p>
                                <img src="../../asset/img/dislike.svg" alt="">
                                <p>0</p>
                            </div>
                        </div>
                        <div class="com__table__p">
                            <p>정말 좋은 글이네여!</p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="com__td">
                        <div class="com__top">
                            누군가님
                            <em>2020 / 10 / 05</em>
                            <div class="com__like">
                                <img src="../../asset/img/like.svg" alt="">
                                <p>5</p>
                                <img src="../../asset/img/dislike.svg" alt="">
                                <p>0</p>
                            </div>
                        </div>
                        <div class="com__table__p">
                            <p>정말 좋은 글이네여!</p>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="com__td">
                        <div class="com__top">
                            누군가님
                            <em>2020 / 10 / 05</em>
                            <div class="com__like">
                                <img src="../../asset/img/like.svg" alt="">
                                <p>5</p>
                                <img src="../../asset/img/dislike.svg" alt="">
                                <p>0</p>
                            </div>
                        </div>
                        <div class="com__table__p">
                            <p>정말 좋은 글이네여!</p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
    <!-- //boardComment -->

    <!-- boardTypeView -->
    <section id="boardTypeView" class="boardTypeView container">
        <div class="board__inner">
            <div class="borad__table">
                <table class="table">
                    <colgroup>
                        <col class="mainTableCol">
                        <col class="mainTableCol">
                        <col class="mainTableCol">
                        <col class="mainTableCol">
                        <col class="mainTableCol">
                    </colgroup>
                    <thead>
                        <tr>
                            <th>번호</th>
                            <th>제목</th>
                            <th>글쓴이</th>
                            <th>글쓴날짜</th>
                            <th>조회수</th>
                        </tr>
                    </thead>
                    <tbody class="main_table_body">
                        <tr>
                            <td>1</td>
                            <td>해당 종은 어떤가요?</td>
                            <td>이영아</td>
                            <td>2022-09-16</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>강아지가 보고싶어요..</td>
                            <td>김다빈</td>
                            <td>2022-09-16</td>
                            <td>11</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>고양이보단 강아지가 나은거같아요</td>
                            <td>문병내</td>
                            <td>2022-09-16</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>요즘 강아지 털갈이가..</td>
                            <td>이승욱</td>
                            <td>2022-09-16</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>강아지가 이상해요 요즘</td>
                            <td>아름이</td>
                            <td>2022-09-16</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>님들 이거 왜이런거임?</td>
                            <td>김아로</td>
                            <td>2022-09-16</td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>아.. 집에가고싶다..</td>
                            <td>루아</td>
                            <td>2022-09-16</td>
                            <td>14</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>강아지보단 고양이가 더 좋은거같아요</td>
                            <td>유리</td>
                            <td>2022-09-16</td>
                            <td>16</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>요즘 어떤 강아지들이 인기많나요??</td>
                            <td>김로아</td>
                            <td>2022-09-16</td>
                            <td>12</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>우리 강아지 상태좀 봐주세요!!</td>
                            <td>박서림</td>
                            <td>2022-09-16</td>
                            <td>34</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="borad__pages">
                <ul>
                    <li><a href="#">&lt;</a></li>
                    <li class="active"><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li><a href="#">&gt;</a></li>
                </ul>
            </div>
            <div class="search__box">
                <form action="." method="post">
                    <fieldset>
                        <input class="search-txt" type="text" placeholder="검색어를 입력해주세요." required>
                        <button class="search-btn" type="submit">SEARCH</button>
                        <a href="#" class="board_write">글쓰기</a>
                    </fieldset>
                </form>
            </div>
        </div>
    </section>
    <!-- //boardTypeView -->
    
</body>

<!-- footer -->
<footer id="footer" class="footer">
    <h2>
        winimal Copyright 2022. All Rights Reserved
        <button><a href="">문의하기</a></button>
    </h2>
</footer>
<!-- //footer -->

<script src="../../asset/js/header_hamburger.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script>
    const commentName = $("#commentName");      // 댓글 이름
    const commentPass = $("#commentPass");      // 댓글 비밀번호
    const commentWrite = $("#commentWrite");    // 댓글 내용

    let commentID = "";
    
    // 댓글 삭제 버튼 클릭 시
    $(".comment__del__del").click(function(e) {
        e.preventDefault();
        // alert("삭제")
        $(".comment__delete").show();

        // 클릭한 아이디 값
        commentID = $(this).parent().parent().attr("id");
    });

    // 댓글 삭제 버튼 -> 취소 버튼 클릭
    $("#commentDeleteCancel").click(function(e) {
        e.preventDefault();
        $(".comment__delete").hide();
    })

    // 댓글 삭제 -> 삭제 버튼 클릭
    $("#commentDeleteButton").click(function() {

        let number = commentID.replace(/[^0-9]/g,"");

        if($("#commentDeletePass").val() == '') {
            alert("댓글 작성시 비밀번호를 입력해주세요");
            $("#commentDeletePass").focus();
        } else {
            $.ajax({
                url: "blogCommentDelete.php",
                method: "POST",
                dataType: "json",
                data: {
                    "pass" : $("#commentDeletePass").val(),
                    "commentID" : number
                },
                success: function(data) {
                    console.log(data);
                    location.reload();
                },
                error: function(request, status, error) {
                    console.log("request" + request);
                    console.log("status" + status);
                    console.log("error" + error);
                }
            })
        }
    })

    // 댓글 수정 버튼 클릭 시
    $(".comment__del__mod").click(function(e) {
        e.preventDefault();
        // alert("수정")
        $(".comment__modify").show();

        commentID = $(this).parent().parent().attr("id");
    });

    // 댓글 수정 버튼 -> 취소 버튼 클릭
    $("#commentModifyCancel").click(function(e) {
        e.preventDefault();
        $(".comment__modify").hide();
    })

    // 댓글 수정 버튼 -> 수정 버튼 클릭
    $("#commentModifyButton").click(function(e) {
    
        e.preventDefault();
        let number = commentID.replace(/[^0-9]/g,"");

        if($("#commentModifyMsg").val() == '' || $("#commentModifyPass").val() == '') {
            alert("수정 내용 및 비밀번호를 입력해주세요");
            $("#commentModifyMsg").focus();
        } else {
            $.ajax({
                url: "blogCommentModify.php",
                method: "POST",
                dataType: "json",
                data: {
                    "msg": $("#commentModifyMsg").val(),
                    "pass": $("#commentModifyPass").val(),
                    "commentID": number
                },
                success: function(data) {
                    console.log(data);
                    location.reload();
                },
                error: function(request, status, error) {
                    console.log("request" , request);
                    console.log("status" , status);
                    console.log("error" , error);
                }
            })
        }
    })

    // 댓글 쓰기 버튼
    $("#commentBtn").click(function() {
        if($("commentWrite").val() == "") {
            alert("댓글을 써주세요.")
            $("#commentWrite").focus();
        } else {
            $.ajax({
                url: "blogCommentWrite.php",
                method: "POST",
                dataType: "json",
                data: {
                    // "blogID": <?=$myBlogID?>,
                    "name": commentName.val(),
                    "pass": commentPass.val(),
                    "msg": commentWrite.val()
                },
                success: function(data) {
                    console.log(data);
                    location.reload();
                },
                error: function(request, status, error) {
                    console.log("request" + request);
                    console.log("status" + status);
                    console.log("error" + error);
                }
            })
        }
    });
</script>

</html>